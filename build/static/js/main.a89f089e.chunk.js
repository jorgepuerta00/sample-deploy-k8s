(this["webpackJsonpsample-app"]=this["webpackJsonpsample-app"]||[]).push([[0],{46:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a(0),c=a.n(n),s=a(39),i=a.n(s),o=(a(46),a(3)),j=a(15),b=a(5),l=a(23),u=function(){return sessionStorage.getItem("token")||null},d=function(){sessionStorage.removeItem("token"),sessionStorage.removeItem("user")},p=function(e,t){sessionStorage.setItem("token",e),sessionStorage.setItem("user",JSON.stringify(t))},h=a(4),O=a.n(h),x=a(7),m=a(19),f=a.n(m),v="https://users-l7rh776aha-uc.a.run.app/api",g={headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwibmFtZSI6IkplbiBKb25lcyIsImlhdCI6MTU5MDExNzY2OH0.Z50ZjBVzVA8l5Lxzjku2q1edyOPboUEOMLOYufsSGm0"}},y={createUser:"users",getUserById:"users/",verifyIdToken:"users/verifyIdToken/"},S=function(){var e=n.useState(),t=Object(o.a)(e,2),a=t[0],r=t[1],c=n.useState(!1),s=Object(o.a)(c,2),i=s[0],j=s[1],b=n.useState(),l=Object(o.a)(b,2),u=l[0],d=l[1],p=f.a.create({baseURL:v});return[i,a,u,function(){var e=Object(x.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(!0),d(""),e.next=5,p.get("".concat(y.getUserById).concat(t),g).then((function(e){r(e.data.data)})).catch((function(e){d("Error retriving data from database.")}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn(e.t0);case 10:return e.prev=10,j(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(t){return e.apply(this,arguments)}}()]},w=a(22);a(66);w.a.initializeApp({apiKey:"AIzaSyApaIbCPZIEyJVjlNwzUZZDUpHI_KwOOjE",authDomain:"sample-microservice-oiga.firebaseapp.com",projectId:"sample-microservice-oiga",storageBucket:"sample-microservice-oiga.appspot.com",messagingSenderId:"913926175112",appId:"1:913926175112:web:56d9a596586e0d0528a23d"});w.a.auth();var I=function(){var e=n.useState(!1),t=Object(o.a)(e,2),a=t[0],r=t[1],c=n.useState(),s=Object(o.a)(c,2),i=s[0],j=s[1],b=n.useState(""),l=Object(o.a)(b,2),u=l[0],d=l[1],p=n.useState(),h=Object(o.a)(p,2),m=h[0],f=h[1];return[a,u,i,m,function(){var e=Object(x.a)(O.a.mark((function e(t,a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),f(""),e.next=5,w.a.auth().signInWithEmailAndPassword(t,a).then((function(e){d(e.user.ya),j(e.user)})).catch((function(e){f(null!=e?e.message:"Something went wrong. Please try again later.")}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn(e.t0);case 10:return e.prev=10,r(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(t,a){return e.apply(this,arguments)}}()]},k=function(){var e=n.useState(),t=Object(o.a)(e,2),a=t[0],r=t[1],c=n.useState(!1),s=Object(o.a)(c,2),i=s[0],j=s[1],b=n.useState(),l=Object(o.a)(b,2),u=l[0],d=l[1],p=f.a.create({baseURL:v});return[i,a,u,function(){var e=Object(x.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(!0),d(""),e.next=5,p.post("".concat(y.createUser),t,g).then((function(e){r("Saved succesfully!")})).catch((function(e){d("Error saving to database.")}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn(e.t0);case 10:return e.prev=10,j(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(t){return e.apply(this,arguments)}}()]},L=a(16),N=a(24),E=function(e){var t=e.component,a=e.exact,n=e.path,c=Object(N.a)(e,["component","exact","path"]);return Object(r.jsx)(b.b,Object(L.a)(Object(L.a)({},c),{},{exact:a,path:n,render:function(e){return u()?Object(r.jsx)(t,Object(L.a)({},e)):Object(r.jsx)(b.a,{to:{pathname:"/login",state:{from:c.location}}})}}))},C=function(e){var t=e.component,a=(e.forceRedirect,e.redirectTo,e.path,Object(N.a)(e,["component","forceRedirect","redirectTo","path"]));return Object(r.jsx)(b.b,Object(L.a)(Object(L.a)({},a),{},{render:function(e){return u()?Object(r.jsx)(b.a,{to:{pathname:"/dashboard"}}):Object(r.jsx)(t,Object(L.a)({},e))}}))},A=function(){var e=n.useState(!1),t=Object(o.a)(e,2),a=t[0],r=t[1],c=f.a.create({baseURL:v});return[a,function(){try{var e=u();if(!e)return;r(!0),c.get("".concat(y.verifyIdToken).concat(e),g).then((function(t){p(e,t.data.data)})).catch((function(e){d()}))}catch(t){console.warn(t)}finally{r(!1)}}]},U=function(e){var t=e.type,a=e.name,n=e.placeholder,c=e.errors,s=e.validation;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("input",{type:t,"aria-invalid":c[a]?"true":"false",placeholder:n,id:a,name:a,ref:s}),c[a]&&"required"===c[a].type&&Object(r.jsx)("span",{role:"alert",children:"This is required"}),c[a]&&"maxLength"===c[a].type&&Object(r.jsx)("span",{role:"alert",children:"Max length exceeded"}),c[a]&&"min"===c[a].type&&Object(r.jsx)("span",{role:"alert",children:"Should be greatter than 0"}),c[a]&&"max"===c[a].type&&Object(r.jsx)("span",{role:"alert",children:"Should be lower than 100"}),c[a]&&"pattern"===c[a].type&&Object(r.jsx)("span",{role:"alert",children:"Should be valid email"}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{})]})};var q=function(e){var t=Object(l.a)(),a=t.register,n=t.handleSubmit,s=t.errors,i=I(),j=Object(o.a)(i,5),b=j[0],u=j[1],d=j[2],h=j[3],O=j[4];return c.a.useEffect((function(){b||""!==h||(p(u,d),e.history.push("/dashboard"))}),[b,h,u,d,e.history]),Object(r.jsxs)("form",{onSubmit:n((function(e){O(e.Email,e.Password)})),children:[Object(r.jsx)("div",{children:" Login "})," ",Object(r.jsx)("br",{}),Object(r.jsx)(U,{type:"text",placeholder:"Email",name:"Email",validation:a({required:!0,pattern:/^[\w-\\.]+@([\w-]+\.)+[\w-]{2,4}$/i}),errors:s}),Object(r.jsx)(U,{type:"password",placeholder:"Password",name:"Password",validation:a({required:!0,maxLength:20}),errors:s}),Object(r.jsx)("input",{type:"submit",value:b?"Loading...":"Login",disabled:b}),Object(r.jsx)("br",{}),h&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("br",{}),Object(r.jsx)("small",{children:h}),Object(r.jsx)("br",{})]}),Object(r.jsx)("br",{})]})};var F=function(e){var t=function(){var e=sessionStorage.getItem("user");return e?JSON.parse(e):null}(),a=S(),n=Object(o.a)(a,4),s=n[0],i=n[1],j=n[2],b=n[3];return c.a.useEffect((function(){b(t.uid)}),[]),s?Object(r.jsx)("div",{className:"content",children:"Retriving data..."}):""!==j?Object(r.jsxs)("div",{className:"content",children:[j&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("br",{}),Object(r.jsx)("small",{children:j}),Object(r.jsx)("br",{})]}),Object(r.jsx)("br",{})]}):Object(r.jsxs)("div",{children:["Welcome ",i.firstname," ",i.lastname,"!",Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),"Age: ",i.age,Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),"Score: ",i.score,Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)("input",{type:"button",onClick:function(){d(),e.history.push("/login")},value:"Logout"})]})};var P=function(){var e=k(),t=Object(o.a)(e,4),a=t[0],n=t[1],c=t[2],s=t[3],i=Object(l.a)(),j=i.register,b=i.handleSubmit,u=i.errors;return a?Object(r.jsx)("div",{className:"content",children:"Saving data..."}):Object(r.jsxs)("form",{onSubmit:b((function(e){s(e)})),children:[Object(r.jsxs)("div",{children:["Welcome to the Register Page! ",Object(r.jsx)("br",{})," ",Object(r.jsx)("br",{})]}),Object(r.jsx)(U,{type:"text",placeholder:"First Name",name:"firstname",validation:j({required:!0,maxLength:30}),errors:u}),Object(r.jsx)(U,{type:"text",placeholder:"Last Name",name:"lastname",validation:j({required:!0,maxLength:30}),errors:u}),Object(r.jsx)(U,{type:"text",placeholder:"Email",name:"email",validation:j({required:!0,pattern:/^[\w-\\.]+@([\w-]+\.)+[\w-]{2,4}$/i}),errors:u}),Object(r.jsx)(U,{type:"text",placeholder:"Age",name:"age",validation:j({required:!0,max:100,min:0}),errors:u}),Object(r.jsx)(U,{type:"text",placeholder:"Score",name:"score",validation:j({required:!0,max:100,min:0}),errors:u}),Object(r.jsx)(U,{type:"password",placeholder:"Password",name:"password",validation:j({required:!0,maxLength:20}),errors:u}),Object(r.jsx)("input",{type:"submit"}),c&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("br",{}),Object(r.jsx)("small",{children:c}),Object(r.jsx)("br",{})]}),Object(r.jsx)("br",{}),n&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("br",{}),Object(r.jsx)("h2",{children:n}),Object(r.jsx)("br",{})]}),Object(r.jsx)("br",{})]})},J=function(e){e.props;return Object(r.jsxs)("div",{className:"header",children:[Object(r.jsx)(j.b,{exact:!0,activeClassName:"active",to:"/",children:"Home"}),Object(r.jsx)(j.b,{activeClassName:"active",to:"/login",children:"Login"}),Object(r.jsx)("small",{children:"(Access without token only)"}),Object(r.jsx)(j.b,{activeClassName:"active",to:"/dashboard",children:"Dashboard"}),Object(r.jsx)("small",{children:"(Access with token only)"})]})};var T=function(){var e=A(),t=Object(o.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){c()}),[c]),a?Object(r.jsx)("div",{className:"content",children:"Checking Authentication..."}):Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(j.a,{children:Object(r.jsxs)("div",{children:[Object(r.jsx)(J,{}),Object(r.jsx)("div",{className:"content",children:Object(r.jsxs)(b.d,{children:[Object(r.jsx)(b.b,{exact:!0,path:"/index",component:P}),Object(r.jsx)(C,{path:"/login",component:q}),Object(r.jsx)(E,{path:"/dashboard",component:F}),Object(r.jsx)(b.a,{from:"/",to:"/index"})]})})]})})})},z=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,73)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),r(e),n(e),c(e),s(e)}))};i.a.render(Object(r.jsx)(T,{}),document.getElementById("root")),z()}},[[72,1,2]]]);
//# sourceMappingURL=main.a89f089e.chunk.js.map